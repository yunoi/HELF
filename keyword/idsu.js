/*
Copyright idsu.net
2006/01.24
*/

function search_idsu(f,e){if(search_off_check()==false){return false;}key=f.value;if(document.all){events=event;}else{events=e;}if(events.keyCode=="40" && f.value){search_view();key_focus(noz);if(stotal>=noz){noz++;}}else if(events.keyCode=="38" && f.value){search_view();if(noz>0)noz--;key_focus(noz);}else if(events.keyCode=="27"){search_nview();}else{search_tmps=search_tmp(f.value);if(search_tmps!=0 || ((/[(°¡-ÆR)]/).test(f.value) && han =="1")){return;}if(f.value && !skey_tmp){NaverSearch(url+'xml.php?skey='+f.value);}else{search_nview();return;}}}function search_view(){var f=document.getElementById("search_");f.style.display="block";}function search_nview(){var f=document.getElementById("search_");f.style.display="none";han="";noz=0;}function search_view_insert(skey){var f=document.getElementById("search_");stotal=0;to_rep=eval("/"+key+"/ig");t="<div style=\"border:1px solid #CCCCCC;background-color:#FFFFFF;\">";t += "<div style=\"background-color:#EAEAEA;height:20px;padding-top:5px;padding-left:5px;\" align=\"left\"><b>ÃßÃµ°Ë»ö¾î</b></a></div>";t += "<div style=\"padding-top:3px;\"></div>";t += "<div id=\"search_sc\" style=\"width:97%;height:150px;overflow:auto;overflow-x:hidden;border:1px solid #CCCCCC;background-color:#FFFFFF;\" align=\"left\" class=\"scroll\" align=\"center\">";if(skey){for(i=0;i<cnt;i++){skeyss=skey[i].replace(to_rep,'<font color=red>'+key+'</font>');skeyss=skeyss.toLowerCase();t += "<div style=\"height:20px;\"><span id=\"keys["+i+"]\" onmouseover=\"this.style.backgroundColor='"+Back_color+"';\" onmouseout=\"this.style.backgroundColor='';\" style=\"padding-left:10px;padding-top:3px;width:100%;color:#000000;display:block;\" value=\""+skey[i]+"\" onmousedown=\"key_click(this,'"+skey[i]+"');\"><a href=\"javascript:;\" onmousedown=\"key_click(this,'"+skey[i]+"');\">"+skeyss+"</a></span></div>";stotal++;}if(cnt<7){i=(7-cnt)*20;t += "<div =\""+i+"\"></div>";}}t += "</div>";t += "<div style=\"padding-top:5px;\"></div>";t += "<div style=\"padding-bottom:3px;padding-right:3px;\" align=\"right\">"+this.license+" <a href=\"javascript:;\" onmousedown=\"search_off();\"><img src=\""+url+"img/off.gif\" border=\"0\"></a>";t += " <a href=\"javascript:;\" onclick=\"my_search_key_fun();\"><img src=\""+url+"img/my.gif\" border=\"0\" id=\"my_search_id\"></a></div>";t += "<div id=\"snow\"></div>";t += "</div>";f.innerHTML=t;return 0;}var noz=0,skey_tmp="",han="",cnt,nn=0,stotal=0,key="";function search_insert(k){this.form.value=k;}function search_tmp(k){tcnt=0;if(skey_tmp){cnts=skey_tmp.length;if(k){if((/[(°¡-ÆR)]/).test(k)){k=hangun_fun(k);}for(i=0;i<cnts;i++){kk=eval("/"+k+"/");n= i+1;if(kk.test(skey_tmp[i])){tcnt++;tmp_block(n);}else{tmp_none(n);}}}}return tcnt;}function hangun_fun(k){var hangul=Array("¤¡","¤¤","¤§","¤©","¤±","¤²","¤µ","¤·","¤¸","¤º","¤»","¤¼","¤½","¤¾","¤¿","¤Á","¤Ã","¤Å","¤Ç","¤Ë","¤Ì","¤Ð","¤Ñ","¤Ó","¤À","¤Â","¤Ä","¤Æ");var hangul2=Array("°¡","³ª","´Ù","¶ó","¸¶","¹Ù","»ç","¾Æ","ÀÚ","Â÷","Ä«","Å¸","ÆÄ","ÇÏ","¾Æ","¾ß","¾î","¿©","¿À","¿ä","¿ì","À¯","À¸","ÀÌ","¾Ö","¾ê","¿¡","¿¹");cnts=hangul.length;for(i=0;i<cnts;i++){gul=eval("/"+hangul[i]+"/");k=k.replace(gul,hangul2[i]);}han="1";return k;}function key_click(t,v){search_insert(v);t.style.backgroundColor=String_color;this.form_name.submit();}function key_focus(n){if(n || n==0){n=noz_fun(n);var k=document.getElementById("keys["+n+"]");if(k){if(nn || nn==0){var k2=document.getElementById("keys["+nn+"]");k2.style.backgroundColor="";}if(document.all){search_insert(k.value);k.focus();}else{}k.style.backgroundColor=Back_color;this.form.focus();nn=n;}noz=nn;}}function noz_fun(n2){for(i=n2;i<cnt;i++){k=document.getElementById("keys["+i+"]");if(k.style.display == "block"){return i;break;}}}function tmp_none(n){var f=document.getElementById("keys["+n+"]");if(f)f.style.display="none";}function tmp_block(n){var f=document.getElementById("keys["+n+"]");if(f)f.style.display="block";}var skeyz=new Array();function NaverSearch(url){if (document.implementation && document.implementation.createDocument) {var xmldoc=document.implementation.createDocument("", "", null);xmldoc.onload=function(){formatRSS(xmldoc);};xmldoc.load(url);}else if (window.ActiveXObject) { var xmldoc=new ActiveXObject("Microsoft.XMLDOM");xmldoc.onreadystatechange=function(  ) {if (xmldoc.readyState == 4){ formatRSS(xmldoc);}};xmldoc.load(url);}}function formatRSS(xmldoc){var items=xmldoc.getElementsByTagName("item");if(items[0]){var d=items[0];cnt=d.getElementsByTagName("skeys").length;for(i=0;i<cnt;i++){skeyz[i]=d.getElementsByTagName("skeys")[i].firstChild.data;}search_view();search_view_insert(skeyz);}skeyz=new Array();}function run_search(form_name,input_name,s_width,url,my_search_keys){this.form= eval("document."+form_name+"."+input_name);this.form_name= eval("document."+form_name);this.url= url;this.license= "<a href=\"http://www.idsu.net\" target=\"_blank\"><img src=\""+url+"img/snow.gif\" border=\"0\" id=\"my_search_id\" alt=\"idsu.net\"></a>";this.my_search_keys=my_search_keys;document.getElementById("search_").style.width=s_width-5;}function search_off(){var todayDate=new Date();var nextDate=new Date();nextDate.setDate( nextDate.getDate() + 1 );document.cookie="search_off=" + todayDate.getDate() + ";path=/;expires=" + nextDate.toGMTString() + ";"}function search_off_check(){var todayDate=new Date();var nextDate=new Date();nextDate.setDate( nextDate.getDate() + 1 );tmp=document.cookie.split(" ");cntz=tmp.length;for(i=0;i<cntz;i++){tmps=tmp[i].split("=");if(tmps[0]=="search_off" && tmps[1]==todayDate.getDate()){return false;}}return;}function search_on(){document.cookie="search_off=;expires=Sun Apr 16 00:00:01 GMT 2000";search_view();my_search_key_fun();}function search_on_click(){this.form.focus();}function my_search_key_fun(){var f=document.getElementById("search_");t="<div style=\"border:1px solid #CCCCCC;background-color:#FFFFFF;\">";t += "<div style=\"background-color:#EAEAEA;height:20px;padding-top:5px;padding-left:5px;\" align=\"left\"><b>³»°¡ Ã£Àº ´Ü¾î</b></a></div>";t += "<div style=\"padding-top:3px;\"></div>";t += "<div id=\"search_sc\" style=\"width:97%;height:150px;overflow:auto;overflow-x:hidden;border:1px solid #CCCCCC;background-color:#FFFFFF;\" align=\"left\" class=\"scroll\" align=\"center\">";tmp=this.my_search_keys.split(",");cnt=this.my_search_keys.length;for(i=0;i<cnt;i++){if(!tmp[i]){continue;}t += "<div style=\"height:20px;\"><span id=\"keys["+i+"]\" onmouseover=\"this.style.backgroundColor='"+Back_color+"';\" onmouseout=\"this.style.backgroundColor='';\" style=\"padding-left:10px;padding-top:3px;width:100%;color:#000000;display:block;\" value=\""+tmp[i]+"\" onmousedown=\"key_click(this,'"+tmp[i]+"');\"><a href=\"javascript:;\" onmousedown=\"key_click(this,'"+tmp[i]+"');\">"+tmp[i]+"</a></span></div>";stotal++;}if(cnt<7){i=(7-cnt)*20;t += "<div height=\""+i+"\"></div>";}t += "</div>";t += "<div style=\"padding-top:5px;\"></div>";t += "<div  style=\"padding-bottom:3px;padding-right:3px;\" align=\"right\"><a href=\"javascript:;\" onmousedown=\"search_off();\">"+this.license+" <img src=\""+url+"img/off.gif\" border=\"0\"></a>";t += " <a href=\"javascript:;\"><img src=\""+url+"img/close.gif\" border=\"0\"></a>  <a href=\"javascript:;\" onclick=\"my_clear();\"><img src=\""+url+"img/my_clear.gif\" border=\"0\" id=\"my_search_id\"></a></div>";t += "</div>";f.innerHTML=t;}function my_clear(){document.cookie="my_search=;expires=Sun Apr 16 00:00:01 GMT 2000";this.my_search_keys="";my_search_key_fun();}function search_check_fun(){if(!this.form.value){alert('°Ë»ö¾î¸¦ ÀÔ·ÂÇØÁÖ¼¼¿ä');return false;}}document.onmouseup=function(e){if(document.all){if(event.srcElement.tagName!='INPUT' && event.srcElement.id!='search_sc' && event.srcElement.id!='my_search_id'){search_nview();}}else{if(e.target.tagName!='INPUT' && e.target.id!='search_sc' && e.target.id!='my_search_id'){search_nview();}}}